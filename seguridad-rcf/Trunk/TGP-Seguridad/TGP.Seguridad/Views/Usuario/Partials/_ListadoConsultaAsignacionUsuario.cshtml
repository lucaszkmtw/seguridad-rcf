@model IList<TGP.Seguridad.BussinessLogic.Dto.AsignacioUsuariosViewModel>
<table id="listado-ConsultaAsignacionUsuarios" class="uk-table" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>Aplicacion</th>
            <th>Rol</th>
            <th>Usuario</th>
            <th>Apellido y Nombre</th>
            <th style="width: 532px;">Nodo Funcional</th>
        </tr>
    </thead>
    <tbody>
        @foreach (TGP.Seguridad.BussinessLogic.Dto.AsignacioUsuariosViewModel user in Model)
        {
            <tr>
                <td>
                    @user.DescripcionEstructuraFuncional
                </td>
                <td>
                    @user.DescripcionRol
                </td>
                <td>
                    @user.NombreUsuario
                </td>

                <td>
                    @user.RazonSocial
                </td>
                @{ string tipplyContent = ""; }
                @if (user.ListaDescripcionNodo.Count > 3)
                {
                    tipplyContent = "<div style='max-height: 300px; overflow-y: scroll;'>";
                    foreach (string nodo in user.ListaDescripcionNodo)
                    {
                        tipplyContent += "<p class='uk-text-small' style='margin: 5px;'>" + @nodo + "</p>";
                    }
                    tipplyContent += "</div>";
                }
                <td>
                    @if (user.ListaDescripcionNodo.Count > 3)
                    {
                        <span class="nodosNoVisibles" data-tippy-content='@tipplyContent'>
                            @for (int i = 0; i < 3; i++)
                            {
                            <span class="uk-badge uk-badge-success uk-badge-notification">@user.ListaDescripcionNodo[i]</span>
                            @Html.Raw(" ")
                            }
                            <span class="uk-badge uk-badge-success uk-badge-notification">@(user.ListaDescripcionNodo.Count - 3) +</span>
                        </span>
                    }
                    else
                    {
                        foreach (var i in user.ListaDescripcionNodo)
                        {
                            <span class="uk-badge uk-badge-success uk-badge-notification">@i</span>
                        }
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

